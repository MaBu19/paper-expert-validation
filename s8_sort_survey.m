% sort data automatically
% 8) survey questions (experience, important measures for CAFPAs, approach)
% - packages 1b and 10b, only answered by expert 1 
%
% MB 23.03.22
% 
% Matlab R2020b
%
%   

clear all;
close all;
clc;


files_exp(1).name = '01_CAFPAs_surveys_2021_Jul_04_2100.csv';
files_exp(2).name = '01_CAFPAs_surveys_2021_Jul_09_2103.csv';

for ie = 1:length(files_exp)
       T_tmp = readtable(['./expert1/' files_exp(ie).name]);
       
       experience(ie) = T_tmp.Age(3); 
       
       approach_tmp{ie} = T_tmp.approach_keys(3);  
       % aim: matrix with 0/1 (order 1:9,0,a) 
       
       meas_cafpas_tmp{ie} = T_tmp.key_resp_8_keys(5:17); 
       
end

% done manually (few data, but this script documents what is done): 
% Approach 
approach = zeros(2,11); % (order 1:9,0,a) (Suppl. Fig. A.3)
approach(1,[2 10]) = 1; 
approach(2,[1 4 5 7 11]) = 1; 
T_approach = array2table(approach , 'VariableNames',{'v1','v2','v3','v4','v5','v6','v7','v8','v9','v0','a'}); 

% Important measurements for respective CAFPAs 
% (order: meas_idx expert rep_idx 1:9,0,b,c,k) (Suppl. Fig. A.4)
meas_cafpas = [1 1 1 1 1 1 1 1 1 0 1 0 0 0 0 0; ...
                       2 1 1 1 1 1 1 1 1 0 1 0 0 0 0 0; ...
                       3 1 1 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                       4 1 1 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                       5 1 1 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                       6 1 1 0 0 0 0 0 0 0 0 0 0 0 1 0; ...
                       7 1 1 0 0 0 0 0 0 0 0 0 0 0 1 0; ...
                       8 1 1 0 0 0 0 0 0 0 0 0 0 0 0 1; ...
                       9 1 1 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                      10 1 1 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                      11 1 1 0 0 0 0 0 0 0 0 1 1 0 0 0; ...
                      12 1 1 0 0 0 0 0 0 0 0 1 1 0 0 0; ...
                      13 1 1 0 0 0 0 0 0 0 0 1 0 0 0 0; ...
                       1 1 2 1 1 1 1 1 1 0 1 0 0 0 0 0; ...
                       2 1 2 0 0 0 0 1 1 0 0 0 0 0 0 0; ...
                       3 1 2 0 0 0 0 1 1 0 0 0 0 0 0 0; ...
                       4 1 2 0 0 0 0 1 1 0 0 0 0 0 0 0; ...
                       5 1 2 0 0 0 0 1 1 0 1 0 0 0 0 0; ...
                       6 1 2 0 0 0 0 0 0 0 0 0 0 0 1 0; ...
                       7 1 2 0 0 0 0 0 0 0 0 0 0 0 1 0; ...
                       8 1 2 0 0 0 0 0 0 0 0 0 0 0 1 0; ...
                       9 1 2 0 0 0 0 1 1 0 1 0 0 0 1 0; ...
                      10 1 2 0 0 0 0 1 1 0 1 0 0 0 1 0; ...
                      11 1 2 0 0 0 0 1 1 0 1 1 0 0 0 0; ...
                      12 1 2 0 0 0 0 0 0 0 0 0 1 0 0 0; ...
                      13 1 2 0 0 0 0 0 0 0 0 1 0 0 0 0];
                  
 T_meas_cafpas = array2table(meas_cafpas,'VariableNames',{'meas','Expert','rep','CA1','CA2','CA3','CA4','CU1','CU2','CB','CN','CC','CE','b','c','k'});
 
 meas_names = {'AG-AC','AG-BC','ACALOS','GÃ–SA','language','age','gender','tinnitus','hp-q','hp-n','WST','SWI','demtect'}; 
 T_meas_cafpas.meas_names = [meas_names,meas_names]'

 
 writetable(T_approach,'./data_sorted_auto/survey-expert-approach.xlsx'); 
 writetable(T_approach,'./data_sorted_auto/survey-expert-approach','Delimiter','\t'); 
 
 writetable(T_meas_cafpas,'./data_sorted_auto/survey-cafpas-measurements.xlsx'); 
 writetable(T_meas_cafpas,'./data_sorted_auto/survey-cafpas-measurements','Delimiter','\t'); 
  
                       
                      
